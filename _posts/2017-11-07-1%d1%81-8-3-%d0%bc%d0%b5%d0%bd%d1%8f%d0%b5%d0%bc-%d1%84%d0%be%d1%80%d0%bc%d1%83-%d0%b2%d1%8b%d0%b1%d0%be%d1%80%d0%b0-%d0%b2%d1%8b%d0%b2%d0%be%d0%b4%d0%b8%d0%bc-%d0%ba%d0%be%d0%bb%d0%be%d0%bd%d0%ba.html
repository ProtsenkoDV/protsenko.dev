---
layout: post
status: publish
published: true
title: 1С 8.3 Меняем форму выбора, выводим колонку из регистра, и передаем в форму
  параметры.
author:
  display_name: Dima Protsenko
  login: Dima Protsenko
  email: ''
  url: ''
author_login: Dima Protsenko
wordpress_id: 16
date: '2017-11-07 14:53:00 +0500'
date_gmt: '2017-11-07 11:53:00 +0500'
---
<div dir="ltr" style="text-align: left;">
<div dir="ltr" style="text-align: left;">Сегодня попробую изменить стиль повествования на другой, надеюсь такой формат будет более удобен Вам, и вы сможете найти решение быстрее.</div>
<p>Идем по стопам статьи <a href="https://protsenko.dev/?p=17" target="_blank" rel="noopener noreferrer">в который мы изучали динамические списки</a>, тут пойдет речь о форме выбора, рассмотрим задачу: "Необходимо добавить в форму выбора колонку с данными из регистра сведений, в форме выбора должен быть отбор по реквизиту основной формы.<br /><a name='more'></a><br />Что нужно сделать для решения задачи
<ol style="text-align: left;">
<li>&nbsp;В необходимом справочнике создаем форму выбора, по материалам из предыдущей статьи добавляет колонку.</li>
<li>&nbsp;В свойствах списка указываем ему Режим выбора.</li>
<li>&nbsp;У события списка нас интересует событие - Выбор, данное событие происходит когда пользователь выбирает элемент справочника. В обработчике события добавляем:&nbsp;<br />
<blockquote>&nbsp;ОповеститьОВыборе(Элементы.Список.ТекущиеДанные.Ссылка </p></blockquote>
</li>
<li>Интересует еще событие&nbsp; ПриСозданииНаСервере, в нем необходимо делать проверку на переданные параметры с основной формы документа.</li>
<li>Уходим в документ где требуется вызвать данный список выбора, нас интересует абстрактное поле с выбором справочника, именно то в котором будем вызывать форму выбора, создаем событие НачалоВыбора, и вызываем форму выбора справочника: </li>
<blockquote><p>//Отключаем стандартную обработку <br />СтандартнаяОбработка = Ложь; <br />//Тут создаем структуру в которой будем передавать форме выбора <br />ПараметрыФормы = Новый Структура("Дата", Объект.Дата); <br />//Получаем форму<br />Форма = ПолучитьФорму("Справочник.Товары.ФормаВыбора", ПараметрыФормы,ЭтаФорма);<br />Форма.Открыть(); </p></blockquote>
<li>Теперь на самой форме ищем Событие - ОбработкаВыбора, создаем, и пишем:</li>
<blockquote><p>Элементы.Товары.ТекущиеДанные.Товар = ВыбранноеЗначение;</p></blockquote>
<p>В принципе это все что нужно знать. Для облегчения понимания, объясняю что за чем идет: Пользователь вызывает форму выбора, при вызове передаются параметры формы, отключается стандартная обработка, открывается форма, выбирается значение, оповещаем о выборе на форме, и ОбработкаВыбора записывает выбранное значение в поле.</ol>
<p>Какие проблемы могут возникнуть, и о которых пишут на форуме:
<ol style="text-align: left;">
<li>Форма выбора открывается дважды - происходит если в НачалоВыбора не отключить стандартную обработку</li>
<li>После выбора элемента - значение не передается в основную форму. Для решения данной проблемы мы как раз в Событии Выбор - оповещаем о выборе, и принимаем это оповещение в событии ОбработкаВыбора.</li>
<li>Открывается форма элемента справочника при выборе - для этого нужно включить режим выбора, см. п. 2 </li>
</ol>
</div>
