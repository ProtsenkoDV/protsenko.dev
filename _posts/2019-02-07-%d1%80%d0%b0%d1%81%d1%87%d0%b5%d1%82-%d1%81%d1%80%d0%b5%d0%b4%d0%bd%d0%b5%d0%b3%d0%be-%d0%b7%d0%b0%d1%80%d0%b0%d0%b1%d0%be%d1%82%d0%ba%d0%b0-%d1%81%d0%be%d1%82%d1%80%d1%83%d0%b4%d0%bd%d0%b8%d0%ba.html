---
layout: post
status: publish
published: true
title: Расчет среднего заработка. Сотрудник не принят на работу ЗУП 3.1
author:
  display_name: Dima Protsenko
  login: Dima Protsenko
  email: ''
  url: ''
author_login: Dima Protsenko
wordpress_id: 7
date: '2019-02-07 14:39:00 +0500'
date_gmt: '2019-02-07 11:39:00 +0500'
categories:
- 1С Разработка
- Программирование
tags: []
comments: []
---
<div dir="ltr" style="text-align: left;">Добрый день, с этого дня начинаю выставлять в общее пользование различные хитрости, и изменения программного кода без снятия с поддержки, цикл публикаций рассчитан на использование механизма расширения конфигурации,  с ним вы сможете внедрять свои правки в программу, и больше никогда не боятся изменений конфигурации.<br />
Все правки делают работу программой более гибкой, и более настраиваемой.</p>
<p>Быстрый переход по статьям:</p>
<ul style="text-align: left;">
<li>При изменении среднего заработка выдает сообщение: "Сотрудник не принят на работу"</li>
<li><a href="https://protsenko.dev/?p=6" target="_blank" rel="noopener noreferrer">Автоматический расчет показателей нормы по производственному календарю </a></li>
</ul>
<p>Проблема №1<br />
При изменении среднего заработка выдает сообщение: "Сотрудник не принят на работу"</p>
<p>С каким-то обновлением прилетело изменение в модуле расчета среднего заработка,  проблема проявляется как правило на уволенных людях по которым нужно провести начисления, а так-же с сотрудниками перенесенных из старой версии программы, на которых нет документа прием на работу, а лишь только начальная штатная расстановка.</p>
<p><a name="more"></a>Решение №1</p>
<p>Копируем Общий модуль - "Учет среднего заработка" в свое расширение.<br />
В пустой модуль добавляем:</p>
<blockquote><p>&amp;Вместо("ЗаполнитьДатуПриемаНаРаботуСотрудника")<br />
Процедура Расш1_ЗаполнитьДатуПриемаНаРаботуСотрудника(ДатаПриема, Сотрудник, ДатаНачалаСобытия, Отказ) Экспорт<br />
// Определим дату приема на работу сотрудника и ограничим ею начало периода расчета среднего заработка.<br />
КадровыеДанные = КадровыйУчет.КадровыеДанныеСотрудников(Истина, Сотрудник, "ДатаПриема,ОформленПоТрудовомуДоговору");<br />
Если КадровыеДанные.Количество() = 0 Тогда<br />
ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Сведения о сотруднике недоступны.'"), , , , Отказ);<br />
Иначе<br />
Если ЗначениеЗаполнено(КадровыеДанные[0].ДатаПриема) Тогда<br />
Если КадровыеДанные[0].ДатаПриема&gt; ДАТА('19000101000000') Тогда<br />
КадровыеДанные[0].ОформленПоТрудовомуДоговору = ИСТИНА;<br />
КонецЕсли;<br />
КонецЕсли;<br />
Если Не КадровыеДанные[0].ОформленПоТрудовомуДоговору Тогда<br />
ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Сотрудник не принят на работу.'"), , , , Отказ);<br />
Иначе<br />
Если Не ЗначениеЗаполнено(ДатаНачалаСобытия) Тогда<br />
ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Дата начала события не заполнена.'"), , , , Отказ);<br />
Иначе<br />
Если КадровыеДанные[0].ДатаПриема &gt; ДатаНачалаСобытия Тогда<br />
ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'Дата начала события раньше, чем сотрудник принят на работу.'"), , , , Отказ);<br />
КонецЕсли;<br />
КонецЕсли;<br />
КонецЕсли;<br />
КонецЕсли;<br />
Если Отказ Тогда<br />
Возврат;<br />
КонецЕсли;<br />
ДатаПриема = КадровыеДанные[0].ДатаПриема;<br />
КонецПроцедуры</p></blockquote>
</div>
